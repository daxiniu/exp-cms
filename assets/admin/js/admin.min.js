/* util.js */
var util=function(d){var a=PAGEENV,b=a.param;return{base:a.base,param:{set:function(c){d.extend(b,c);window.location.search=d.param(b)},get:function(c){return b[c]||""}},version:a.version}}(jQuery);
/* dataTable.js */
var dataTable=function(c){var b=c(".list-table"),h=b.find(".js-sort");b=b.find("tbody");var i=b.find("span[qtip=1]"),j=b.find("span[action]"),k=b.find(".js-opt-delete");b.find(".js-opt-audit");b.find(".js-opt-move");b.find(".js-opt-flag");b.find(".js-opt-undo-rej");b.find(".js-opt-preview");var d=b.find("input[name=select]");b.find("tr:odd").addClass("tr-odd");b.find("tr").hover(function(){c(this).addClass("tr-hover")},function(){c(this).removeClass("tr-hover")});h.each(function(){var a=c(this),e=
a.attr("order_by"),f="asc",l=util.param.get("order_by"),g=util.param.get("sort_type");if(e===l){if(g==="asc")f="desc";a.append('<span class="sort-'+g+'"></span>')}a.click(function(){util.param.set({order_by:e,sort_type:f,page:"1"})});a.hover(function(){a.addClass("js-sort-hover")},function(){a.removeClass("js-sort-hover")})});i.qtip({style:{name:"blue"},position:{target:"mouse"}});j.each(function(){var a=c(this);a.qtip({show:{when:"click",solo:true},hide:{when:"click"},position:{corner:{target:"rightBottom",
tooltip:"rightTop"},adjust:{x:20,y:0}},style:{name:"blue",width:280},content:{text:"\u8f7d\u5165\u4e2d...",title:{text:a.attr("title"),button:"\u5173\u95ed"}},api:{beforeShow:function(){a.addClass("table-btn-active")},beforeHide:function(){a.removeClass("table-btn-active")}}})});k.each(function(){var a=c(this);a.qtip("api").onShow=function(){this.loadContent(PAGEENV.base+a.attr("action"),{v:util.version})}});d.click(function(){mutiOperation.dialogBtns.each(function(){c(this).qtip("api").hide()})});
return{option:{getSelected:function(){var a=[];d.filter("[checked!=]").each(function(){a.push(c(this).val())});return a},getSelectedString:function(a){a||(a=",");return this.getSelected().join(a)},getSelectedCount:function(){return this.getSelected().length},setAll:function(){d.each(function(){this.checked=false;c(this).click()})},setInverse:function(){d.each(function(){c(this).click()})}}}}(jQuery);
/* mutiOperation.js */
var mutiOperation=function(c){var b=c(".operation-bar"),f=b.find(".operation-btn"),d=b.find("span[action]"),g=b.find(".js-mutiopt-select"),h=b.find(".js-mutiopt-inverse"),e=b.find(".js-mutiopt-delete");b.find(".js-mutiopt-audit");b.find(".js-mutiopt-flag");b.find(".js-mutiopt-move");b.find(".js-mutiopt-undo-pub");b.find(".js-mutiopt-undo-rej");f.each(function(){var a=c(this);a.hover(function(){a.addClass("operation-btn-hover")},function(){a.removeClass("operation-btn-hover")})});g.click(dataTable.option.setAll);
h.click(dataTable.option.setInverse);d.each(function(){var a=c(this);a.qtip({show:{when:"click",solo:true},hide:{when:"click"},position:{corner:{target:"bottomLeft",tooltip:"topLeft"},adjust:{x:-20,y:0}},style:{name:"blue",width:300},content:{text:"\u8f7d\u5165\u4e2d...",title:{text:"\u6279\u91cf"+a.attr("title"),button:"\u5173\u95ed"}},api:{beforeShow:function(){a.addClass("operation-btn-active")},beforeHide:function(){a.removeClass("operation-btn-active")}}})});e.each(function(){var a=c(this);a.qtip("api").onShow=
function(){this.updateTitle("\u6279\u91cf"+a.attr("title")+"\uff1a\u9009\u4e2d<strong>"+dataTable.option.getSelectedCount()+"</strong>\u6761\u6570\u636e");this.loadContent(util.base+e.attr("action"),{v:util.version})}});return{dialogBtns:d}}(jQuery);
/* tableSearch.js */
var tableSearch=function(a){a=a(".list-search");var b=a.find(".search"),c=a.find(".keyword"),d=a.find("input");a=util.param.get("keyword");d.val(a).keypress(function(e){e.keyCode===13&&b.click()});b.click(function(){util.param.set({keyword:d.val()})});b.hover(function(){b.addClass("search-hover")},function(){b.removeClass("search-hover")});c.focusin(function(){c.addClass("keyword-focus")}).focusout(function(){c.removeClass("keyword-focus")})}(jQuery);